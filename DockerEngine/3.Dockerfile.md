
* Dockerfile describes step-by-step instruction of all the commands we need to generate a docker image. 
* https://docs.docker.com/engine/reference/builder/


# Dockerfile declaratives

    FROM base-image-name:tag-version AS alias

    LABEL version="1.0"
    LABEL description="This example dockerfile"
    LABEL multi.label1="value1" multi.label2="value2" other="value3"

    MAINTAINER user@gmail.com

    USER root

    ARG MAVEN_VERSION=3.8.1

    ENV MAVEN_HOME=/opt/maven-3.8.1

    RUN wget http://maven.com/${MAVEN_VERSION}.zip

    RUN touch env.txt

    RUN printenv > env.txt 

    RUN apt-get update -y && apt-get upgrade -y && apt-get install git -y

    RUN echo 'dockerfile declaratives'

    RUN --from=ubuntu:16.04 source/path/somefile /destination/path/somefile

    COPY source/path/file destination/path/file

    ADD http://maven.com/${MAVEN_VERSION}.zip /opt

    ADD hom* /mydir/ #To add all files starting with “hom”

    ADD test.txt relativeDir/

    RUN mkdir -p /home/ubuntu/newDir/subDir

    USER ubuntu

    FROM base-image-name-2:tag-version

    COPY --from=alias source/path/file dest/path/file

    EXPOSE 8080 #this command is used to set environment variables in the container.

    ADD  <SRC>  <DEST> #it will copy the files and directories from the host machine to the container and its support copy the files from remote URLs.

    ENTRYPOINT ["/script.sh"]

    WORKDIR target

    SHELL /bin/bash

    SHELL /bin/sh

    SHELL /bin/ksh


-----------------------------------------

## Example-1:
  
    FROM debian:stable
    RUN apt-get update && apt-get install -y --force-yes apache2
    EXPOSE 80 443
    VOLUME ["/var/www", "/var/log/apache2", "/etc/apache2"]
    ENTRYPOINT ["/usr/sbin/apache2ctl", "-D", "FOREGROUND"]

-----------------------------------------



# ARG vs ENV

![image](https://user-images.githubusercontent.com/24622526/121010012-79699200-c7b2-11eb-8434-5bd7d0e8c85b.png)

# CMD vs RUN

*RUN*: the run command is used to run any shell commands. these commands will run on top of the base image layer. run commands executed during the build time. you can use this command any number of times in dockerfile.

*CMD*: the cmd command doesn’t execute during the build time it will execute after the creation of the container. there can be only one cmd command in dockerfile. if you add more than one cmd commands the last one will be executed and remaining all will be skipped. cmd command you can use in two types one is as executable for and another one is parameters form.

    executable form:
    
        CMD ["java","-jar","/path/jarName.jar"]
        
        CMD ["py","install.py"]

    parameters form:

        ENTRYPOINT ["/script.sh"]
        CMD ["patameter"]


# CMD vs ENTRYPOINT


# Dokcer image vs container
  
     A docker image is an immutable(not modifiable) file that contains code, dependencies, libraries, tools and the whole runtime environment which is needed in order to run the application. It has a read-only functionality, It is a multi-layered file, build to execute the code and run the application. 
  
     Docker container is nothing but a runtime instance of an image. 

 
Docker container and its layers, we can't remove docker image while container in use.
  
https://dzone.com/articles/docker-layers-explained  


![image](https://user-images.githubusercontent.com/24622526/121015502-b042a680-c7b8-11eb-9c03-1d58e7324425.png)


https://linuxhandbook.com/essential-docker-commands/

https://www.decodingdevops.com/dockerfile-commands-explained-cheat-sheet/

